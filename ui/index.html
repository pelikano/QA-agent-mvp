<!DOCTYPE html>
<html>
<head>
    <title>QA Agent Demo</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>

<header>QA Agent Demo</header>

<div class="container">

    <div class="controls">
        <strong>OpenAI Configuration:</strong>
        <input type="text" id="apiKeyInput" placeholder="Enter OpenAI API Key">
        <button onclick="saveApiKey()">Save API Key</button>
        <span id="apiStatus"></span>
    </div>

    <div class="config-row">
        <label>Features Directory:</label>
        <input type="text" id="featuresDirInput">
        <button onclick="updateFeaturesDirectory()">Update</button>
    </div>

    <div id="currentPathInfo" class="path-info"></div>

    <div class="controls">
        <strong>Scenario Management:</strong>

        <label class="file-upload">
            <input type="file" id="fileInput" hidden>
            <button type="button" onclick="document.getElementById('fileInput').click()">
                Upload File
            </button>
        </label>

        <button id="generateButton" class="button-primary" onclick="generate()">
            Generate Features
        </button>

        <button id="applyButton" class="button-disabled" disabled onclick="applyChanges()">
            Apply Changes
        </button>

        <span id="loader" class="loader">Processing...</span>
    </div>

    <div class="layout">
        <div class="panel">
            <h2>Current Features</h2>
            <div id="currentFiles"></div>
        </div>

        <div class="panel">
            <h2>Proposed Changes</h2>
            <div id="proposedFiles"></div>
        </div>
    </div>

    <div class="panel" style="margin-top:20px;">
        <h2>File Content</h2>
        <div id="diffViewer" class="diff-container"></div>
    </div>

    <hr style="margin:40px 0;">

    <div class="panel" style="height:auto;">
        <h2>Analyze User Story</h2>

        <div style="margin-bottom:15px;">
            <label><strong>User Story</strong></label><br/>
            <textarea id="analyzeInput"
                    style="width:100%; height:140px; padding:10px; border-radius:6px; border:1px solid #ccc;"></textarea>
        </div>

        <button class="button-primary" onclick="analyzeStory()">
            Analyze
        </button>

        <div style="margin-top:20px;">
            <label><strong>Analysis Result</strong></label><br/>
            <textarea id="analyzeOutput"
                    readonly
                    style="width:100%; height:160px; padding:10px; border-radius:6px; border:1px solid #ccc;"></textarea>
        </div>
    </div>

</div>

<script src="/app.js"></script>
</body>
</html>
